<html>
	<head>
		<script>
			document.addEventListener('DOMContentLoaded', function () {
				var canvas = document.createElement('canvas');
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
				document.body.appendChild(canvas);
				var ctx = canvas.getContext('2d');

				var balls = [];
				var numBalls = prompt('How many balls do you want?');

				function Ball(x, y, vx, vy, radius, color) {
					this.x = x;
					this.y = y;
					this.vx = vx;
					this.vy = vy;
					this.radius = radius;
					this.color = color;
				}

				Ball.prototype.draw = function () {
					ctx.beginPath();
					ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
					ctx.closePath();
					ctx.fillStyle = this.color;
					ctx.fill();
				};

				Ball.prototype.update = function () {
					if (this.x + this.radius >= canvas.width) {
						this.vx = -this.vx;
					}

					if (this.x - this.radius <= 0) {
						this.vx = -this.vx;
					}

					if (this.y + this.radius >= canvas.height) {
						this.vy = -this.vy;
					}

					if (this.y - this.radius <= 0) {
						this.vy = -this.vy;
					}

					this.x += this.vx;
					this.y += this.vy;
				};

				function createBalls(num) {
					for (var i = 0; i < num; i++) {
						var radius = Math.random() * 20 + 10;
						var x = Math.random() * (canvas.width - radius * 2) + radius;
						var y = Math.random() * (canvas.height - radius * 2) + radius;
						var vx = Math.random() * 6 - 3;
						var vy = Math.random() * 6 - 3;
						var color =
							'rgb(' +
							Math.floor(Math.random() * 256) +
							',' +
							Math.floor(Math.random() * 256) +
							',' +
							Math.floor(Math.random() * 256) +
							')';
						balls.push(new Ball(x, y, vx, vy, radius, color));
					}
				}

				function drawBalls() {
					for (var i = 0; i < balls.length; i++) {
						balls[i].draw();
					}
				}

				function updateBalls() {
					for (var i = 0; i < balls.length; i++) {
						balls[i].update();
					}
				}

				function drawLines() {
					for (var i = 0; i < balls.length; i++) {
						for (var j = i + 1; j < balls.length; j++) {
							var dx = balls[j].x - balls[i].x;
							var dy = balls[j].y - balls[i].y;
							var dist = Math.sqrt(dx * dx + dy * dy);
							if (dist < balls[i].radius + balls[j].radius) {
								ctx.beginPath();
								ctx.moveTo(balls[i].x, balls[i].y);
								ctx.lineTo(balls[j].x, balls[j].y);
								ctx.strokeStyle = balls[i].color;
								ctx.stroke();
							}
						}
					}
				}

				function loop() {
					ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
					ctx.fillRect(0, 0, canvas.width, canvas.height);
					drawBalls();
					updateBalls();
					drawLines();
					requestAnimationFrame(loop);
				}

				createBalls(numBalls);
				loop();
			});
		</script>
	</head>
	<body style="margin: 0"></body>
</html>
